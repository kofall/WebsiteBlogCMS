@model WebsiteBlogCMS.Data.Post

@{
    Layout = "~/Views/_BlogLayoutPage.cshtml";
}

<!-- single post -->
<section class="text-11 py-5">
    <div class="text11 py-lg-5 py-md-4">
        <div class="container">
            <div class="blog-title px-md-5">
                <h3 class="title-big">
                    @Model.title
                </h3>
                <ul class="blog-list">
                    <li>
                        <p> Posted on <strong>@Model.publishedAt</strong></p>
                    </li>
                    <li>
                        <p> By <a href="@Url.Action("Details", "User", new { id = Model.authorId })"><strong>@WebsiteBlogCMS.Classes.DataHelper.GetUserName(Model.authorId)</strong></a></p>
                    </li>
                    <li>
                        <p>
                            Published in
                            @foreach (var category in Model.PostCategories)
                            {
                                <a href="@Url.Action("PostsOfCategory", "Post", new { id = category.categoryId })"><strong>@category.Category.title</strong></a>
                            }
                        </p>
                    </li>
                </ul>
            </div>
        </div>
        <div class="image mb-sm-5 mb-4">
            <img src="~/images/blogsingle.jpg" alt="" class="img-fluid radius-image-full">
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="text11-content">
                        @Html.Raw(Model.content)

                        <div class="social-share-blog mt-5">
                            <ul class="column3 tags m-0 p-0">
                                <li>
                                    <p class="m-0 mr-sm-4 mr-2">Tags :</p>
                                </li>
                                @foreach (var tag in Model.PostTags)
                                {
                                    <a href="@Url.Action("PostsOfTag", "Post", new { id = tag.tagId })" class="btn-small"><strong>@tag.Tag.title</strong></a>
                                }
                            </ul>
                        </div>
                    </div>


                    <div class="text11-content mt-5">
                        <div class="comments">
                            <h3 class="aside-title ">Recent comments(2)</h3>
                            <div class="comments-grids">
                                <div class="media-grid">
                                    <div class="media">
                                        <a class="comment-img" href="#url">
                                            <img src="~/images/a1.jpg"
                                                 class="img-responsive" width="100px" alt="placeholder image">
                                        </a>
                                        <div class="media-body comments-grid-right">
                                            <h5>Jack Harry</h5>
                                            <ul class="p-0 comment">
                                                <li class="">July 15th, 2020 at 11:00 am</li>
                                                <li>
                                                    <a href="#comment" class="text-primary">Reply</a>
                                                </li>
                                            </ul>
                                            <p>
                                                Mattis ut hendrerit non, facilisis eget mauris. Sed ultricies nec purus
                                                quis
                                                tempor. Phasellus ipsum eu nec purus quis tempor dolor set.
                                            </p>

                                        </div>
                                    </div>
                                </div>
                                <div class="media-grid">
                                    <div class="media">
                                        <a class="comment-img" href="#url">
                                            <img src="~/images/a2.jpg"
                                                 class="img-responsive" width="100px" alt="placeholder image">
                                        </a>
                                        <div class="media-body comments-grid-right">
                                            <h5>Charlie</h5>
                                            <ul class="p-0 comment">
                                                <li class="">July 15th, 2020 at 05:45 pm </li>
                                                <li>
                                                    <a href="#comment" class="text-primary">Reply</a>
                                                </li>
                                            </ul>
                                            <p>
                                                Mattis ut hendrerit non, facilisis eget mauris. Sed ultricies nec purus
                                                quis
                                                tempor. Phasellus eu nec purus quis tempor.
                                            </p>
                                            <div class="media mt-4 mb-0 border-0 px-0 pb-0">
                                                <a class="comment-img" href="#url">
                                                    <img src="~/images/a3.jpg"
                                                         class="img-responsive" width="100px" alt="placeholder image">
                                                </a>
                                                <div class="media-body comments-grid-right">
                                                    <h5>Jack Harry</h5>
                                                    <ul class="p-0 comment">
                                                        <li class="">July 15th, 2020 at 11:00 am</li>
                                                        <li>
                                                            <a href="#comment" class="text-primary">Reply</a>
                                                        </li>
                                                    </ul>
                                                    <p>
                                                        Mattis ut hendrerit non, facilisis eget mauris. Sed ultricies nec
                                                        purus quis
                                                        tempor. dolor set.
                                                    </p>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="leave-comment-form" id="comment">
                            <h3 class="aside-title">Leave a reply</h3>
                            <form action="#" method="post">
                                <div class="input-grids">
                                    <div class="form-group">
                                        <input type="text" name="Name" class="form-control" placeholder="Your Name"
                                               required="">
                                    </div>
                                    <div class="form-group">
                                        <textarea name="Comment" class="form-control" placeholder="Your Comment"
                                                  required=""></textarea>
                                    </div>
                                </div>
                                <div class="submit text-right">
                                    <button class="btn btn-style btn-primary">Post Comment</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="sidebar-side col-lg-4 col-md-12 col-sm-12 mt-lg-0 mt-5">
                    <aside class="sidebar">

                        <!-- Author card Widget-->
                        <div class="sidebar-widget sidebar-blog-category">
                            <div class="author">
                                <div class="sidebar-title">
                                    <h4>O autorze</h4>
                                </div>
                                <div class="author-detalis">
                                    <a href="@Url.Action("Details", "User", new { id = Model.authorId })" class="author-image">
                                        <img src="~/images/a2.jpg"
                                             alt="author image" class="img-fluid">
                                    </a>
                                    <div class="author-info">
                                        <a href="@Url.Action("Details", "User", new { id = Model.authorId })" class="author-name">@WebsiteBlogCMS.Classes.DataHelper.GetUserName(Model.authorId)</a>
                                    </div>
                                </div>
                                <p class="mt-2">
                                    @Model.User.intro
                                </p>
                            </div>
                        </div>
                        <!-- //Author card Widget-->
                        <!--Blog Category Widget-->
                        <div class="sidebar-widget sidebar-blog-category">
                            <div class="sidebar-title">
                                <h4>Zobacz również</h4>
                            </div>
                            <ul class="blog-cat">
                                @foreach (var category in ViewBag.Categories)
                                {
                                    <li><a href="@Url.Action("PostsOfCategory", "Post", new { id = category.id })">@category.title </a></li>
                                }
                            </ul>
                        </div>


                        <!-- Popular Post Widget-->
                        <div class="sidebar-widget popular-posts">
                            <div class="sidebar-title">
                                <h4>Posty użytkownika</h4>
                            </div>

                            @if (ViewBag.UserPosts == null || ViewBag.UserPosts.Count == 0)
                            {
                                <p>Brak innych postów.</p>
                            }
                            else
                            {
                                foreach (var post in ViewBag.UserPosts)
                                {
                                    <article class="post">
                                        <figure class="post-thumb"><img src="~/images/beauty8.jpg" alt=""></figure>
                                        <div class="text">
                                            @Html.ActionLink($"{post.title}", "Details", "Post", new { id = post.id }, null)
                                        </div>
                                        <div class="post-info">@post.publishedAt</div>
                                    </article>
                                }
                            }
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- //single post -->